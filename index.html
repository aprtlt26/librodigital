let audioContext;

function requestAudioPermission() {
    return new Promise((resolve, reject) => {
        const permissionAlert = window.confirm('Â¿Permitir uso de sonido?');
        if (permissionAlert) {
            if (!audioContext) {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
            }
            audioContext.resume().then(() => {
                console.log('Audio activado');
                resolve();
            }).catch(err => {
                console.error('Error al activar el audio:', err);
                reject(err);
            });
        } else {
            reject('Permiso denegado');
        }
    });
}

document.addEventListener('DOMContentLoaded', function() {
    initAudio();
});

function initAudio() {
    requestAudioPermission().then(() => {
        startGame();
    }).catch(err => {
        console.error('Error al solicitar permiso de audio:', err);
    });
}

function startGame() {
    console.log("El juego ha comenzado");
    initFlock();
}



